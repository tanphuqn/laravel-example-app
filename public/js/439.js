(self.webpackChunk=self.webpackChunk||[]).push([[439],{439:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>y});var a=r(757),s=r.n(a),n="https://js.stripe.com/v3",o=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",c=null,l=function(t){return null!==c?c:c=new Promise((function(e,r){if("undefined"!=typeof window)if(window.Stripe&&t&&console.warn(i),window.Stripe)e(window.Stripe);else try{var a=function(){for(var t=document.querySelectorAll('script[src^="'.concat(n,'"]')),e=0;e<t.length;e++){var r=t[e];if(o.test(r.src))return r}return null}();a&&t?console.warn(i):a||(a=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(n).concat(e);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(r),r}(t)),a.addEventListener("load",(function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))})),a.addEventListener("error",(function(){r(new Error("Failed to load Stripe.js"))}))}catch(t){return void r(t)}else e(null)}))},d=function(t,e,r){if(null===t)return null;var a=t.apply(void 0,e);return function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.15.0",startTime:e})}(a,r),a},u=Promise.resolve().then((function(){return l(null)})),m=!1;u.catch((function(t){m||console.warn(t)}));var p=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];m=!0;var a=Date.now();return u.then((function(t){return d(t,e,a)}))};function v(t,e,r,a,s,n,o){try{var i=t[n](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,s)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var n=t.apply(e,r);function o(t){v(n,a,s,o,i,"next",t)}function i(t){v(n,a,s,o,i,"throw",t)}o(void 0)}))}}const f={data:function(){return{stripe:{},cardElement:{},customer:{first_name:"",last_name:"",email:"",address:"",city:"",state:"",zip_code:""},paymentProcessing:!1}},mounted:function(){var t=this;return g(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("pk_test_51IsibGCBaoBKC4ddGmxsFqxkFQYVL4eMD4W2L2BC4UIJgtkbDaWlfCkyrpIwIPnoJCOfLURyI6AQWwnFSRde4RlK00gBRI0X61");case 2:t.stripe=e.sent,r=t.stripe.elements(),t.cardElement=r.create("card",{classes:{base:"bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 p-3 leading-8 transition-colors duration-200 ease-in-out"}}),t.cardElement.mount("#card-element");case 6:case"end":return e.stop()}}),e)})))()},methods:{cartLineTotal:function(t){var e=t.price*t.quantity;return(e/=100).toLocaleString("en-US",{style:"currency",currency:"USD"})},processPayment:function(){var t=this;return g(s().mark((function e(){var r,a,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.paymentProcessing=!0,e.next=3,t.stripe.createPaymentMethod("card",t.cardElement,{billing_details:{name:t.customer.first_name+" "+t.customer.last_name,email:t.customer.email,address:{line1:t.customer.address,city:t.customer.city,state:t.customer.state,postal_code:t.customer.zip_code}}});case 3:r=e.sent,a=r.paymentMethod,(n=r.error)?(t.paymentProcessing=!1,console.error(n)):(console.log(a),t.customer.payment_method_id=a.id,t.customer.amount=t.$store.state.cart.reduce((function(t,e){return t+e.price*e.quantity}),0),t.customer.cart=JSON.stringify(t.$store.state.cart),axios.post("/api/purchase",t.customer).then((function(e){t.paymentProcessing=!1,console.log(e),t.$store.commit("updateOrder",e.data),t.$store.dispatch("clearCart"),t.$router.push({name:"order.summary"})})).catch((function(e){t.paymentProcessing=!1,console.error(e)})));case 7:case"end":return e.stop()}}),e)})))()}},computed:{cart:function(){return this.$store.state.cart},cartQuantity:function(){return this.$store.state.cart.reduce((function(t,e){return t+e.quantity}),0)},cartTotal:function(){var t=this.$store.state.cart.reduce((function(t,e){return t+e.price*e.quantity}),0);return(t/=100).toLocaleString("en-US",{style:"currency",currency:"USD"})}}};const y=(0,r(900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full"},[r("div",{staticClass:"lg:w-2/3 w-full mx-auto mt-8 overflow-auto"},[r("table",{staticClass:"table-auto w-full text-left whitespace-no-wrap"},[t._m(0),t._v(" "),r("tbody",[t._l(t.cart,(function(e,a){return r("tr",{key:e.id},[r("td",{staticClass:"p-4"},[t._v("\n                        "+t._s(e.name)),r("br"),t._v(" "),r("p",{staticClass:"text-red-600"},[t._v("Color: "+t._s(e.color))]),t._v(" "),r("p",{staticClass:"text-blue-600"},[t._v("Size: "+t._s(e.size))])]),t._v(" "),r("td",{staticClass:"p-4",domProps:{textContent:t._s(e.quantity)}}),t._v(" "),r("td",{staticClass:"p-4",domProps:{textContent:t._s(t.cartLineTotal(e))}}),t._v(" "),r("td",{staticClass:"w-10 text-right"},[r("button",{staticClass:"flex ml-auto text-sm text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded",on:{click:function(e){return t.$store.commit("removeFromCart",a)}}},[t._v("\n                            Remove\n                        ")])])])})),t._v(" "),r("tr",[r("td",{staticClass:"p-4 font-bold"},[t._v("Total Amount")]),t._v(" "),r("td",{staticClass:"p-4 font-bold",domProps:{textContent:t._s(t.cartQuantity)}}),t._v(" "),r("td",{staticClass:"p-4 font-bold",domProps:{textContent:t._s(t.cartTotal)}}),t._v(" "),r("td",{staticClass:"w-10 text-right"})])],2)])]),t._v(" "),r("div",{staticClass:"lg:w-2/3 w-full mx-auto mt-8"},[r("div",{staticClass:"flex flex-wrap -mx-2 mt-8"},[r("div",{staticClass:"p-2 w-1/3"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"first_name"}},[t._v("First Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.first_name,expression:"customer.first_name"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"text",id:"first_name",name:"first_name",disabled:t.paymentProcessing},domProps:{value:t.customer.first_name},on:{input:function(e){e.target.composing||t.$set(t.customer,"first_name",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"p-2 w-1/3"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"last_name"}},[t._v("Last Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.last_name,expression:"customer.last_name"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"text",id:"last_name",name:"last_name",disabled:t.paymentProcessing},domProps:{value:t.customer.last_name},on:{input:function(e){e.target.composing||t.$set(t.customer,"last_name",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"p-2 w-1/3"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"email"}},[t._v("Email Address")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.email,expression:"customer.email"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"email",id:"email",name:"email",disabled:t.paymentProcessing},domProps:{value:t.customer.email},on:{input:function(e){e.target.composing||t.$set(t.customer,"email",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"flex flex-wrap -mx-2 mt-4"},[r("div",{staticClass:"p-2 w-1/3"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"address"}},[t._v("Street Address")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.address,expression:"customer.address"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"text",id:"address",name:"address",disabled:t.paymentProcessing},domProps:{value:t.customer.address},on:{input:function(e){e.target.composing||t.$set(t.customer,"address",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"p-2 w-1/3"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"city"}},[t._v("City")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.city,expression:"customer.city"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"text",id:"city",name:"city",disabled:t.paymentProcessing},domProps:{value:t.customer.city},on:{input:function(e){e.target.composing||t.$set(t.customer,"city",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"p-2 w-1/6"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"state"}},[t._v("State")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.state,expression:"customer.state"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"email",id:"state",name:"state",disabled:t.paymentProcessing},domProps:{value:t.customer.state},on:{input:function(e){e.target.composing||t.$set(t.customer,"state",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"p-2 w-1/6"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"zip_code"}},[t._v("Zip Code")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.zip_code,expression:"customer.zip_code"}],staticClass:"w-full bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",attrs:{type:"email",id:"zip_code",name:"zip_code",disabled:t.paymentProcessing},domProps:{value:t.customer.zip_code},on:{input:function(e){e.target.composing||t.$set(t.customer,"zip_code",e.target.value)}}})])])]),t._v(" "),t._m(1),t._v(" "),r("div",{staticClass:"p-2 w-full"},[r("button",{staticClass:"flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg",attrs:{disabled:t.paymentProcessing},domProps:{textContent:t._s(t.paymentProcessing?"Processing":"Pay Now")},on:{click:t.processPayment}})])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{staticClass:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200 rounded-tl rounded-bl"},[t._v("\n                        Item\n                    ")]),t._v(" "),r("th",{staticClass:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"},[t._v("\n                        Quantity\n                    ")]),t._v(" "),r("th",{staticClass:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"},[t._v("\n                        Price\n                    ")]),t._v(" "),r("th",{staticClass:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"},[t._v("\n                        Actions\n                    ")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-wrap -mx-2 mt-4"},[r("div",{staticClass:"p-2 w-full"},[r("div",{staticClass:"relative"},[r("label",{staticClass:"leading-7 text-sm text-gray-600",attrs:{for:"card-element"}},[t._v("Credit Card Info")]),t._v(" "),r("div",{attrs:{id:"card-element"}})])])])}],!1,null,null,null).exports}}]);